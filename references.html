
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>References workflow &#8212; lcdb-wf 0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="RNA-seq workflow" href="rnaseq.html" />
    <link rel="prev" title="Overview of workflows" href="workflows.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="toc.html">lcdb-wf</a></h1>



<p class="blurb">Customizable workflows for high-throughput sequencing analysis</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">Guide to file hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Testing the installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="workflows.html">Overview of workflows</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="workflows.html#primary-analysis-workflows">Primary analysis workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="workflows.html#integrative-analysis-workflows">Integrative analysis workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="workflows.html#features-common-to-workflows">Features common to workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="workflows.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration details</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">References workflow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-dictionary-of-references">A dictionary of references</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rnaseq.html">RNA-seq workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="downstream-rnaseq.html">RNA-Seq downstream analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="chipseq.html">ChIP-seq workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrative.html">Integrative workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">For Developers</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="toc.html">Documentation overview</a><ul>
  <li><a href="workflows.html">Overview of workflows</a><ul>
      <li>Previous: <a href="workflows.html" title="previous chapter">Overview of workflows</a></li>
      <li>Next: <a href="rnaseq.html" title="next chapter">RNA-seq workflow</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="references-workflow">
<span id="references"></span><h1>References workflow<a class="headerlink" href="#references-workflow" title="Permalink to this headline">¶</a></h1>
<p>This workflow is not normally run on its own. Rather, it is intended to be
<cite>include:</cite>-ed into other workflows that depend on reference fastas, indexes,
and annotations. That way, rules in this references workflow will only be run
for those files asked for in the parent workflow.</p>
<p>It is still possible to run this workflow on its own. In that case, it will
build <strong>all</strong> of the references and indexes specified in the config. This can
be helpful when setting up the workflows for the first time on a new machine.</p>
<p>In all cases, it depends on the <cite>references</cite> section being in
<code class="docutils literal notranslate"><span class="pre">config/config.yaml</span></code>. See <a class="reference internal" href="references-config.html#references-config"><span class="std std-ref">References config</span></a> for details on
configuring.</p>
<img alt="_images/references.png" src="_images/references.png" />
<div class="section" id="a-dictionary-of-references">
<h2>A dictionary of references<a class="headerlink" href="#a-dictionary-of-references" title="Permalink to this headline">¶</a></h2>
<p>The references workflow in <code class="docutils literal notranslate"><span class="pre">workflows/references/Snakefile</span></code>, when run on its
own, builds all references specified in the config file. This is typically done
only when initially setting up a system that will run workflows on many
different references.</p>
<p>Most of the time, this workflow is included into the other workflows with the
<code class="docutils literal notranslate"><span class="pre">include:</span></code> directive. This way, any reference files that are needed by, say,
the RNA-seq workflow will be created automatically.</p>
<p>The format of the config YAML is designed to be convenient to edit and
maintain. It can be awkward to use within a Snakefile though, so for
convenience it is converted into an easier-to-access dictionary in
the <code class="docutils literal notranslate"><span class="pre">c</span></code> config object in each workflow, accessible as <code class="docutils literal notranslate"><span class="pre">c.refdict</span></code>.</p>
<p>If we have the following <cite>references</cite> section defined in our config file (see
<a class="reference internal" href="config.html#config"><span class="std std-ref">Configuration details</span></a> for more):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">references</span><span class="p">:</span>
  <span class="nt">dm6</span><span class="p">:</span>
    <span class="nt">r6-11</span><span class="p">:</span>
      <span class="nt">fasta</span><span class="p">:</span>
        <span class="nt">url</span><span class="p">:</span> <span class="s">&quot;https://url/to/dm6.fasta&quot;</span>
        <span class="nt">indexes</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bowtie2</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hisat2</span>
      <span class="nt">gtf</span><span class="p">:</span>
        <span class="nt">url</span><span class="p">:</span> <span class="s">&quot;https://url/to/gm6.gtf&quot;</span>
        <span class="nt">conversions</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">refflat</span>
    <span class="nt">r6-11_transcriptome</span><span class="p">:</span>
      <span class="nt">fasta</span><span class="p">:</span>
        <span class="nt">url</span><span class="p">:</span> <span class="s">&quot;https://url/to/transcriptome.fa&quot;</span>
        <span class="nt">indexes</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">salmon</span>
</pre></div>
</div>
<p>then it will be converted to this simplified version where values are
filenames:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s1">&#39;dm6&#39;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s1">&#39;r6-11&#39;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s1">&#39;fasta&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11/fasta/dm6_r6-11.fasta&#39;</span><span class="p">,</span>
         <span class="s1">&#39;refflat&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11/gtf/dm6_r6-11.refflat&#39;</span><span class="p">,</span>
         <span class="s1">&#39;gtf&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11/gtf/dm6_r6-11.gtf&#39;</span><span class="p">,</span>
         <span class="s1">&#39;chromsizes&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11/fasta/dm6_r6-11.chromsizes&#39;</span><span class="p">,</span>
         <span class="s1">&#39;bowtie2&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11/bowtie2/dm6_r6-11.1.bt2&#39;</span><span class="p">,</span>
         <span class="s1">&#39;hisat2&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11/hisat2/dm6_r6-11.1.ht2&#39;</span><span class="p">,</span>
         <span class="p">},</span>
     <span class="s1">&#39;r6-11_transcriptome&#39;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s1">&#39;fasta&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11_transcriptome/fasta/dm6_r6-11_transcriptome.fasta&#39;</span><span class="p">,</span>
         <span class="s1">&#39;chromsizes&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11_transcriptome/fasta/dm6_r6-11_transcriptome.chromsizes&#39;</span><span class="p">,</span>
         <span class="s1">&#39;salmon&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/dm6/r6-11_transcriptome/salmon/dm6_r6-11_transcriptome/hash.bin,</span>
         <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2017, Ryan Dale, Justin Fear.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/references.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>