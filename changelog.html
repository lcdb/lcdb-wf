<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Changelog &#8212; lcdb-wf 1.9 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=9735eac1" />
    <script src="_static/documentation_options.js?v=754f84b7"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="For Developers" href="developers.html" />
    <link rel="prev" title="FAQs" href="faqs.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="toc.html">lcdb-wf</a></h1>



<p class="blurb">Customizable workflows for high-throughput sequencing analysis</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">Guide to file hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Overview of workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="rnaseq.html">RNA-seq workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="downstream-rnaseq.html">RNA-Seq downstream analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="chipseq.html">ChIP-seq workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrative.html">Integrative workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">conda and conda envs in <cite>lcdb-wf</cite></a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Testing the installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">FAQs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#v1-13">v1.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-12">v1.12</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-11">v1.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-10-3">v1.10.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-10-2">v1.10.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-10-1">v1.10.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-10">v1.10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rna-seq">RNA-seq</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-9">v1.9</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tests">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-8">v1.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chip-seq">ChIP-seq</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-7">v1.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-6">v1.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chip-seq-workflow">ChIP-seq workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rna-seq-workflow">RNA-seq workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rna-seq-downstream">RNA-seq downstream</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">General</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-3">v1.5.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bugs">Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-2">v1.5.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-1">v1.5.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id20">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chip-seq-and-rna-seq">ChIP-seq and RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">RNA-seq</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-sept-2019">v1.5 (Sept 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id25">RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id39">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#all-workflows">All workflows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-4-2-jul-2019">v1.4.2 (Jul 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bugfixes">Bugfixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-4-1-jul-2019">v1.4.1 (Jul 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id41">RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-4-may-2019">v1.4 (May 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id43">RNA-seq</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-3-may-2019">v1.3 (May 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id44">Bugfixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#infrastructure">Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id45">ChIP-seq and RNA-seq</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-2-mar-2019">v1.2 (Mar 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id46">RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id47">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id48">ChIP-seq and RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id49">Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#colocalization">Colocalization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-1-aug-2018">v1.1 (Aug 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id50">Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id51">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#both-rna-seq-and-chip-seq">Both RNA-seq and ChIP-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id52">ChIP-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id53">RNA-seq</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-1-jun-2018">v1.0.1 (Jun 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id54">Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id55">RNA-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downstream-rnaseq-rmd"><code class="docutils literal notranslate"><span class="pre">downstream/rnaseq.Rmd</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id56">ChIP-seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id57">Both RNA-seq and ChIP-seq</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-may-2018">v1.0 (May 2018)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">For Developers</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="toc.html">Documentation overview</a><ul>
      <li>Previous: <a href="faqs.html" title="previous chapter">FAQs</a></li>
      <li>Next: <a href="developers.html" title="next chapter">For Developers</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Link to this heading">¶</a></h1>
<section id="v1-13">
<h2>v1.13<a class="headerlink" href="#v1-13" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Improved support for Snakemake v8+ and cluster profiles while maintaining
backward compatibility. Set two different env vars,
<code class="docutils literal notranslate"><span class="pre">LCDBWF_SNAKEMAKE_PROFILE</span></code> and <code class="docutils literal notranslate"><span class="pre">LCDBWF_SNAKEMAKE_PROFILE_V8</span></code> to the
corresponding profile directories. The <code class="docutils literal notranslate"><span class="pre">include/WRAPPER_SLURM</span></code> will inspect
the running Snakemake version and select the appropriate profile to use.</p></li>
<li><p>During deployment, support installing additional packages into the
environment. This is useful in particular when using a cluster profile that
depends on an executor plugin.</p></li>
<li><p>Default to conda rather than mamba as a conda front-end</p></li>
</ul>
</section>
<section id="v1-12">
<h2>v1.12<a class="headerlink" href="#v1-12" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Fixed render_r1_r2 function(s) in Snakefiles (#413) which cleans up some
Snakefile functions</p></li>
<li><p>add Plodia interpunctella reference config (#417) which adds some
postprocessing functionality for dealing with references in zip files, and
adds references for Plodia interpunctella</p></li>
<li><p>Make <code class="docutils literal notranslate"><span class="pre">strand_arg</span></code> a param (#415) which moves strandedness arguments to
params: directive, letting jobs re-run if strandedness changed in config.
Previously, rules needed to be manually re-run after changing strandedness in
config.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">plotting.R</span></code> (#423) to fix a typo in the (infrequently-used)
lcdbwf::vargenes_heatmap() function</p></li>
<li><p>Change SRA fastq directory (#418) which improves how SRA-configured runs are
handled, addressing #408</p></li>
<li><p>Use tempdir, if configured, for STAR (#425) which allows STAR to use a temp
dir if configured</p></li>
</ul>
</section>
<section id="v1-11">
<h2>v1.11<a class="headerlink" href="#v1-11" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Add samtools stats and samtools flagstat (#397) for additional QC options</p></li>
<li><p>Generate RDS object ready for carnation (#399), which overhauls the way
output Rds objects are made from RNA-seq downstream RMarkdown files. This
prepares for integration with Carnation, an interactive web interface
currently still in development but being used internally Rds files are
dramatically smaller after stripping out superfluous data Better support for
running rnaseq.Rmd followed by functional-enrichment.Rmd, and/or
gene-patterns.Rmd without overwriting existing Rds files.</p></li>
<li><p>Limit background genes in overrepresentation analysis in
functional-enrichment.Rmd (#401) to support universe of expressed genes by
default when running functional enrichment, while also supporting
customization if needed.</p></li>
<li><p>Implemented LRT functionality (#396) to support LRT in the lcdb::make_results
machinery</p></li>
</ul>
</section>
<section id="v1-10-3">
<h2>v1.10.3<a class="headerlink" href="#v1-10-3" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>improve the deploy script (thanks &#64;aliciaaevans)</p></li>
<li><p>support the epic2 peak-caller for the ChIP-seq workflow (thanks &#64;Mira0507)</p></li>
<li><p>for later versions of featureCounts, add <code class="docutils literal notranslate"><span class="pre">--countReadPairs</span></code> argument to RNA-seq workflow (&#64;therealgenna)</p></li>
</ul>
</section>
<section id="v1-10-2">
<h2>v1.10.2<a class="headerlink" href="#v1-10-2" title="Link to this heading">¶</a></h2>
<p>Minor bugfix release.</p>
<ul class="simple">
<li><p>Fix multiqc configs so that they coorectly ignore any cutadapt fastqc zips when building the raw fastq section</p></li>
<li><p>Fix multiqc config for chipseq so it correctly cleans the <code class="docutils literal notranslate"><span class="pre">_R2</span></code> extension to better support PE ChIP-seq-like workflows</p></li>
<li><p>Fix functional enrichment label truncation to ensure that truncated labels are unique</p></li>
</ul>
</section>
<section id="v1-10-1">
<h2>v1.10.1<a class="headerlink" href="#v1-10-1" title="Link to this heading">¶</a></h2>
<p>This is a bugfix and minor patch release.</p>
<ul>
<li><p>Bugfix: the references workflow was missing the <code class="docutils literal notranslate"><span class="pre">resources:</span></code> directives;
they have now been added.</p></li>
<li><p>Bugfix: kallisto strandedness was set incorrectly for libraries using
ligation prep (fr-secondstrand)</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">utils.autobump</span></code> function can be used to easily specify default and
incremented resources, and the <code class="docutils literal notranslate"><span class="pre">utils.gb</span></code> and <code class="docutils literal notranslate"><span class="pre">utils.hours</span></code> make it
a little easier to specify when autobump is not required.</p>
<p>In the following example, memory will be set to 8 * 1024 MB and will
increment by that much each retry. The runtime will be set to 2 * 60 minutes,
and will increment by 10 * 60 minutes each retry. The disk will be set to 100
* 1024 MB, and will not increase each retry.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">resources</span><span class="p">:</span>
    <span class="n">mem_mb</span><span class="o">=</span><span class="n">autobump</span><span class="p">(</span><span class="n">gb</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span>
    <span class="n">runtime</span><span class="o">=</span><span class="n">autobump</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">increment_hours</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">disk_mb</span><span class="o">=</span><span class="n">gb</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>WRAPPER_SLURM no longer has the <code class="docutils literal notranslate"><span class="pre">--latency-wait=300</span></code>,
<code class="docutils literal notranslate"><span class="pre">--max-jobs-per-second=1</span></code>, and <code class="docutils literal notranslate"><span class="pre">--max-status-checks-per-second=0.01</span></code>
which would override any profile settings.</p></li>
<li><p>In RNA-seq and ChIP-seq, the cutadpt rule now defaults to using
<code class="docutils literal notranslate"><span class="pre">--nextseq-trim</span> <span class="pre">20</span></code> instead of <code class="docutils literal notranslate"><span class="pre">-q</span> <span class="pre">20</span></code>, to better handle the majority of
sequencing data we have recently been working with (NovaSeq). See <a class="reference external" href="https://cutadapt.readthedocs.io/en/stable/guide.html#nextseq-trim">this
section of the cutadapt docs</a> for
details.</p></li>
<li><p>Updated requirements to use a recent version of salmon to avoid segfaults</p></li>
<li><p>rnaseq.Rmd, when saving the Rds file at the end, now disables compression.
This can have a dramatic improvement on downstream performance for
a reasonable disk space cost.</p></li>
<li><p>functional-enrichment.Rmd, now supports KEGG pathways &amp; parallel operation.</p></li>
<li><p>functional-enrichment.Rmd, gene-patterns.Rmd, now saves Rds file at the
end (without compression) adding the respective object lists.</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">--overlap</span> <span class="pre">6</span></code> to cutadapt to avoid greedy trimming</p></li>
</ul>
</section>
<section id="v1-10">
<h2>v1.10<a class="headerlink" href="#v1-10" title="Link to this heading">¶</a></h2>
<p>The major change here is refactoring the Snakefiles to use the <code class="docutils literal notranslate"><span class="pre">resources:</span></code>
directive in each rule, and removing the <code class="docutils literal notranslate"><span class="pre">--clusterconfig</span></code> mechanism which
has long been deprecated.</p>
<p>For running on a cluster, this requires a <a class="reference external" href="https://snakemake.readthedocs.io/en/stable/executing/cli.html#profiles">profile</a>.
E.g., on <a class="reference external" href="https://hpc.ni.gov">NIH’s Biowulf</a>, use the <a class="reference external" href="https://github.com/NIH-HPC/snakemake_profile">NIH-HPC
snakemake_profile</a>.</p>
<section id="general">
<h3>General<a class="headerlink" href="#general" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>No longer using clusterconfig, instead using resources to configure cluster resources</p></li>
<li><p>Migrated to a unified testing script that simplifies local and CI testing</p></li>
<li><p>If sampletable is from SRA, raise an error if a Layout column can’t be found
(to prevent incorrect interpretation of samples as single-end)</p></li>
<li><p>Ensure bam indexes are made for the markdups bams, even if bigwigs are not created</p></li>
<li><p>Remove libsizes table, which was largely redundant with fastqc results</p></li>
</ul>
</section>
<section id="rna-seq">
<h3>RNA-seq<a class="headerlink" href="#rna-seq" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix R tests</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">lcdbwf</span></code> R functions use the <code class="docutils literal notranslate"><span class="pre">:::</span></code> namespace lookup syntax</p></li>
<li><p>Fix library loads in rnaseq.Rmd to ensure they come before parallelization configuration</p></li>
<li><p>New function <code class="docutils literal notranslate"><span class="pre">lcdbwf:::lfc_scatter</span></code> for comparing multiple DESeq2 contrasts</p></li>
<li><p>Updates and fixes to <code class="docutils literal notranslate"><span class="pre">gene-patterns.Rmd</span></code></p></li>
</ul>
</section>
</section>
<section id="v1-9">
<h2>v1.9<a class="headerlink" href="#v1-9" title="Link to this heading">¶</a></h2>
<p>This version has substantial changes in the <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code> file to streamline
its use in a production environment. This involves moving most of the code
complexity into the <code class="docutils literal notranslate"><span class="pre">lcdbwf</span></code> R package and using a new config file as much as
possible. See details below.</p>
<section id="id1">
<h3>General<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>environments have been updated with recent versions of all tools</p></li>
<li><p>WRAPPER_SLURM arguments updated with arguments better suited for cluster submission</p></li>
<li><p>PhiX reference configs have been removed</p></li>
<li><p>compatibility with Python 3.10</p></li>
<li><p>fastq-dump rules have been converted to scripts. This is because sra-tools in
versions earlier than 3.0 have issue with SSL certs, however sra-tools=3
cannot be installed alongside recent versions of salmon (due to conflicting
pinnings with the <code class="docutils literal notranslate"><span class="pre">icu</span></code> package). Therefore, fastq-dump is now run as
a script in its own conda environment.</p></li>
<li><p>new idxstats rule for chipseq and rnaseq</p></li>
</ul>
</section>
<section id="id2">
<h3>RNA-seq<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p><strong>This version has major changes to</strong> <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code>. Briefly:</p>
<ol class="arabic simple">
<li><p>This file has been overhauled to be driven by a config file. This
dramatically reduces the need to scroll through the RMarkdown file and make
all the customizations for a particular experiment. Now, editing the config
file sets up most of the project-specific components. Note that contrasts
still need to be customized in the Rmd file.</p></li>
<li><p>The narrative and explanatory text has been moved to <code class="docutils literal notranslate"><span class="pre">text.yaml</span></code> and is
included at render time. This reduces the need to scroll through lots of
boilerplate text in the RMarkdown while still retaining the ability to
easily edit it.</p></li>
<li><p>Most of the complexity has been offloaded to the <code class="docutils literal notranslate"><span class="pre">lcdbwf</span></code> R package.</p></li>
<li><p>Caches are much improved. See the <a class="reference internal" href="rnaseq-rmd.html#downstream-detailed"><span class="std std-ref">Detailed documentation of RNA-Seq downstream</span></a> section for
more information.</p></li>
<li><p>Functional enrichment is moved into a separate RMarkdown file.</p></li>
</ol>
<section id="downstream-rna-seq-config">
<h4>Downstream RNA-seq config<a class="headerlink" href="#downstream-rna-seq-config" title="Link to this heading">¶</a></h4>
<p>The file, <cite>workflows/rnaseq/downstream/config.yaml</cite> is heavily commented to
describe the various settings. The sections of the config are designed such
that they can be used as additional chunk options to chunks in which they are
used. This additional chunk option is used by RMarkdown to compute the hash of
the chunk. The result is that making a change in the config file is sufficient
to invalidate the cache of any chunks that specify that section as a chunk
option.</p>
</section>
<section id="complexity-moved-to-lib-lcdbwf-r">
<h4>Complexity moved to <code class="docutils literal notranslate"><span class="pre">lib/lcdbwf/R</span></code><a class="headerlink" href="#complexity-moved-to-lib-lcdbwf-r" title="Link to this heading">¶</a></h4>
<p>Another major change is that most of the complexity in the <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code> file
has been factored out into the <code class="docutils literal notranslate"><span class="pre">lcdbwf</span></code> R package that is stored inn
<code class="docutils literal notranslate"><span class="pre">lib/lcdbwf</span></code>. While this means that all code is no longer included in the
final rendered HTML file, it does make the Rmd much more streamlined to work
with. It also has the side effect of making it easier to write unit tests on
separate functions.</p>
<p>Many helper functions have been added to the <code class="docutils literal notranslate"><span class="pre">lcdbwf</span></code> R package, including
ones to streamline the creation of dds and results objects, composing and saving
them, and generating many of the outputs.</p>
</section>
<section id="improved-caching-of-results-chunks">
<h4>Improved caching of results chunks<a class="headerlink" href="#improved-caching-of-results-chunks" title="Link to this heading">¶</a></h4>
<p>A somewhat major change is a new strategy for allowing <code class="docutils literal notranslate"><span class="pre">results()</span></code> calls to be
split across multiple, independently-cached chunks that are then properly merged
together into a single <code class="docutils literal notranslate"><span class="pre">res.list</span></code> object while handling dependencies and
parallelization (thanks to <a class="reference external" href="https://github.com/njohnso6">&#64;njohnso6</a>). This
dramatically speeds up the process of incrementally adding contrasts to complex
experimental designs.</p>
</section>
<section id="other-changes">
<h4>Other changes<a class="headerlink" href="#other-changes" title="Link to this heading">¶</a></h4>
<p>In addition to these major changes, there are also many other improvements
to <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>AnnotationHub databases are only retrieved from cache when they are
needed. This dramatically speeds up rendering of the HTML, since before
the OrgDb would always load no matter what.</p></li>
<li><p>Toggle Kallisto or Salmon quantification with a simple true/false; this
automatically sums to gene level using automatically retrieved TxDb. This
also now supports creating dds objects from featureCounts, Salmon, or
Kallisto in such a way that they can be easily compared with each other.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lcdbwf::compose_results()</span></code> to combine res_list and dds_list objects
together by inspecting the global namespace for specially-named objects</p></li>
<li><p>Helper functions for retrieving global config and data structures (e.g.,
<code class="docutils literal notranslate"><span class="pre">lcdbwf::get_config()</span></code>, <code class="docutils literal notranslate"><span class="pre">lcdbwf::get_dds()</span></code>)</p></li>
<li><p>Helper function <code class="docutils literal notranslate"><span class="pre">lcdbwf::match_from_dots</span></code> for working with <cite>…</cite>
arguments and splitting them up to only go to the functions they are
intended for</p></li>
<li><p>Much faster to attach info (e.g., adding SYMBOL to all results) since the
AnnotationDbi calls are only done once instead of for each results
object.</p></li>
<li><p>Refactored functional enrichment to be much more generalized, currently
using Gene Ontology and MSigDB. MSigDb, via the <code class="docutils literal notranslate"><span class="pre">msigdbr</span></code> package, is
available for multiple species and so this incorporates Reactome and
KEGG. But the generalized method can be applied to any arbitrary gene
sets, allowing for much more customization.</p></li>
<li><p>Fixes to clusterProfiler::emapplot calls in particular corner cases</p></li>
<li><p>Functional enrichment is now a completely separate file, using the
<code class="docutils literal notranslate"><span class="pre">combined.Rds</span></code> file as an intermediate between <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code> and
<code class="docutils literal notranslate"><span class="pre">functional_enrichment.Rmd</span></code>.</p></li>
<li><p>All-in-one enrichment function that runs either overrepresentation or
GSEA. Makes it much easier to do <em>ad hoc</em> tests.</p></li>
<li><p>Helper function <code class="docutils literal notranslate"><span class="pre">lcdbwf::enrich_list_lapply()</span></code> to apply arbitrary
functions to the highly-nested <cite>enrich_list</cite> data structure</p></li>
<li><p>Helper function <code class="docutils literal notranslate"><span class="pre">lcdbwf::collect_objects</span></code> to help compile discovered
results objects</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lcdbwf::get_sig()</span></code> has more options for what to return</p></li>
<li><p>Plotting wrappers for clusterProfiler plot functions, allowing plots to be
configured via the config file.</p></li>
<li><p>New dds diagnostics and results diagnostics functions and sections of the
Rmd, useful for troubleshooting</p></li>
<li><p>Refactored the results tabs: MA plots come first; ensure 10 genes are always plotted in MA
plots, added volcano plots with labeled genes, removed top 3 and bottom
3 gene plots</p></li>
<li><p>PCA plots using plotly no longer need “unrolled” for-loops; multiple PCA
coloring and clustered heatmap row side colors are now configured in the
YAML config file</p></li>
<li><p>Moved size factor plots and gene version removal to lcdbwf package</p></li>
<li><p>Use datatable to show initial sampletable for cleaner output</p></li>
<li><p>Make original dds_initial object the same way as later dds objects and
always using a design of <code class="docutils literal notranslate"><span class="pre">~1</span></code> to be used in PCA and heatmaps</p></li>
<li><p>“Differential expression” header moved so that code is no longer hidden
under the size factors plot</p></li>
<li><p>Option for filling in NA in symbol with Ensembl IDs</p></li>
<li><p>collapseReplicates2 uses <code class="docutils literal notranslate"><span class="pre">collapse_by</span></code> rather than <code class="docutils literal notranslate"><span class="pre">combine.by</span></code></p></li>
<li><p>Updated the code style throughout to use the tidyverse/google style guide</p></li>
<li><p>RNA-seq differential expression output is additionally included in an
Excel file with one sheet per contrast.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="tests">
<h3>Tests<a class="headerlink" href="#tests" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lcdbwf</span></code> R package now has its own tests via <code class="docutils literal notranslate"><span class="pre">devtools</span></code> and <code class="docutils literal notranslate"><span class="pre">testthat</span></code></p></li>
<li><p>recent versions of Snakemake are broken when <code class="docutils literal notranslate"><span class="pre">--until</span></code> is used in certain
circumstances; a ChIP-seq test has been disabled temporarily.</p></li>
<li><p>after a successful test, the environment is written as an artifact on circleci</p></li>
</ul>
</section>
<section id="references">
<h3>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a longstanding issue with <em>S. cerevisiae</em>, now the GFF file is properly converted to GTF.</p></li>
</ul>
</section>
</section>
<section id="v1-8">
<h2>v1.8<a class="headerlink" href="#v1-8" title="Link to this heading">¶</a></h2>
<section id="id3">
<h3>General<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Complete shift to using pinned <code class="docutils literal notranslate"><span class="pre">env.yaml</span></code> files to specify conda
environments, and using <code class="docutils literal notranslate"><span class="pre">mamba</span></code> for building environments (consistent with
recent versions of Snakemake). This is now reflected in documentation and
the updated-and-improved <code class="docutils literal notranslate"><span class="pre">deploy.py</span></code>.</p></li>
<li><p>Reorganization/cleanup of the <code class="docutils literal notranslate"><span class="pre">include</span></code> directory</p></li>
<li><p>Added conda troubleshooting notes to the documentation (see
<a class="reference internal" href="conda.html#conda-troubleshooting"><span class="std std-ref">Troubleshooting environments</span></a>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">lib.helpers.preflight</span></code> function no requires the first column of the
sampletable to be named <cite>samplename</cite> when checking configs.</p></li>
<li><p>Improvements to the deployment script <code class="docutils literal notranslate"><span class="pre">deploy.py</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>now requires Python &gt;3.6</p></li>
<li><p>proper logs (so you can easily see how long it takes to build an env)</p></li>
<li><p>supports downloading and running the script directly, which will clone
a temporary copy and deploy from there</p></li>
<li><p>using Control-C to stop the deployment will also stop mamba/conda</p></li>
<li><p>colored output</p></li>
<li><p>mamba is used by default, but <code class="docutils literal notranslate"><span class="pre">--conda-frontend</span></code> will use conda instead</p></li>
</ul>
</div></blockquote>
</li>
<li><p>fastq-dump log is sent to file rather than printed to stdout</p></li>
<li><p>Threads: cutadapt single-end now uses specified threads (it was using
1 thread by default); use 6 threads for fastqc</p></li>
<li><p>Added new preflight checks for RNA-seq and ChIP-seq specific configs.</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">run_complex_test.sh</span></code> driver script for testing the workflows on
full-scale publicly available data</p></li>
</ul>
</section>
<section id="id4">
<h3>RNA-seq<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Configuration change:</strong> The <code class="docutils literal notranslate"><span class="pre">stranded:</span></code> field is now required for RNA-seq.
This is used to choose the correct parameters for various rules, and avoids
one of the main reasons to edit the Snakefile. See <a class="reference internal" href="config-yaml.html#cfg-stranded"><span class="std std-ref">stranded field</span></a> for
more details on its use.</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">stranded:</span></code> field to all configs used in testing</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">strand_check</span></code> rule now runs MultiQC for a convenient way of evaluating
strandedness of a library.</p></li>
<li><p>Kallisto is now supported in both the RNA-seq Snakefile, references
Snakefile, included reference configs, and downstream <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code></p></li>
</ul>
</section>
<section id="id5">
<h3>References<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>When checking URLs in reference configs, don’t use <code class="docutils literal notranslate"><span class="pre">curl</span></code> to check
<code class="docutils literal notranslate"><span class="pre">file://</span></code> URIs.</p></li>
<li><p>There is a new feature for reference configs that allows chaining
post-processing functions together, see <a class="reference internal" href="references-config.html#advanced-postprocessing"><span class="std std-ref">More advanced postprocessing</span></a>. This
means that it is possible, for example, to add ERCC spike-ins (which need
post-processing) onto references that themselves need post-processing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lib/postprocess/ercc.py</span></code> has new helper functions for adding ERCC
spike-ins to fasta files and GTF files.</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">'kallisto'</span></code> to included reference configs</p></li>
</ul>
</section>
<section id="chip-seq">
<h3>ChIP-seq<a class="headerlink" href="#chip-seq" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>symlinks rule is now local</p></li>
<li><p>added collectinsertsizes pattern to support PE ChIP-seq experiments</p></li>
<li><p>merging bigwigs log no longer goes to stdout</p></li>
</ul>
</section>
</section>
<section id="v1-7">
<h2>v1.7<a class="headerlink" href="#v1-7" title="Link to this heading">¶</a></h2>
<section id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Link to this heading">¶</a></h3>
<p>Use mamba for installation of environments, consistent with Snakemake recommendations</p>
</section>
<section id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>We now recommend using <a class="reference external" href="https://github.com/mamba-org/mamba">mamba</a> to
create conda environments. This is dramatically faster and solves some
dependency issues. Our automated tests now use this.</p></li>
<li><p>We have moved from requirements.txt files to env.yaml files. We also now
encourage the use of the strictly-pinned environments for a more stable
experience to hopefully avoid transient issues in the packaging ecosystem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbb=2020.2</span></code> as a dependency to fix a recent packaging issue with conda-forge.</p></li>
<li><p>many documentation improvements</p></li>
<li><p>symlinks rule is only set to localrule when it exists (it does not exist when
running an analysis exclusively from SRA)</p></li>
</ul>
</section>
<section id="id6">
<h3>References<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>updated URLs for those that have changes (e.g., Sanger -&gt; EBI; using https
instead of ftp for UCSC-hosted genomes)</p></li>
<li><p>new <code class="docutils literal notranslate"><span class="pre">gff2gtf</span></code> post-process tool for when an annotation is only available as
GFF. <em>S. pombe</em> needs this, for example, and the
<cite>Schizosaccharomyces_pombe.yaml`</cite> reference config has been updated
accordingly.</p></li>
<li><p>The references workflow no longer reads the config file in its directory.
This fixes some subtle overwriting issues when providing config files or
items from the command line during as is used during certain test runs. If
running the references workflow alone, it must be called with
<code class="docutils literal notranslate"><span class="pre">--configfile</span></code></p></li>
</ul>
</section>
<section id="id7">
<h3>RNA-seq<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>featureCounts now uses BAM files with duplicates marked. Previously if you
wanted to run featureCounts in a mode where it excluded duplicates you would
need to reconfigure rules.</p></li>
<li><p>improved comments in RNA-seq downstream RMarkdown files</p></li>
</ul>
</section>
<section id="id8">
<h3>Testing<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>new test that checks all URLs identified in config files to ensure that the
included reference files remain valid</p></li>
<li><p>there is now a separate <code class="docutils literal notranslate"><span class="pre">run_downstream_test</span></code> script`</p></li>
<li><p>simplified the CircleCI DAG to optimize testing resources</p></li>
</ul>
</section>
</section>
<section id="v1-6">
<h2>v1.6<a class="headerlink" href="#v1-6" title="Link to this heading">¶</a></h2>
<section id="id9">
<h3>References<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>overhaul the way transcriptome fastas are created. Instead of requiring
separate download, they are now created out of the provided GTF and fasta
files. The reference config section now uses keys <code class="docutils literal notranslate"><span class="pre">genome:</span></code>,
<code class="docutils literal notranslate"><span class="pre">transcriptome:</span></code>, and <code class="docutils literal notranslate"><span class="pre">annotation:</span></code> rather than the <code class="docutils literal notranslate"><span class="pre">fasta:</span></code> and
<code class="docutils literal notranslate"><span class="pre">gtf:</span></code> keys.</p></li>
<li><p><strong>backwards-incompatible change:</strong> reference config files have been updated
to reflect the changes in the references workflow</p></li>
<li><p>Update PhiX genome fasta to use NCBI rather than Illumina iGenomes</p></li>
</ul>
</section>
<section id="chip-seq-workflow">
<h3>ChIP-seq workflow<a class="headerlink" href="#chip-seq-workflow" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>ChIP-seq workflow now properly supports paired-end reads</p></li>
<li><p>A ChIP-seq workflow can now be run when the <code class="docutils literal notranslate"><span class="pre">chipseq:</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">peak_calling:</span></code> sections are omitted.</p></li>
<li><p>added a missing bowtie2 config entry in <code class="docutils literal notranslate"><span class="pre">clusterconfig.yaml</span></code> which could
result in out-of-memory errors when submitting to a cluster using that file</p></li>
</ul>
</section>
<section id="rna-seq-workflow">
<h3>RNA-seq workflow<a class="headerlink" href="#rna-seq-workflow" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>if colData is a tibble this no longer causes issues for importing counts</p></li>
<li><p>dupRadar removed from RNA-seq workflow. We ended up never using it, and it
depends on R which we’ve since removed from the main environment.</p></li>
<li><p>new <code class="docutils literal notranslate"><span class="pre">strand_test</span></code> rule, which can be run explicitly with <code class="docutils literal notranslate"><span class="pre">snakemake</span> <span class="pre">-j2</span>
<span class="pre">strand_check</span></code>. This generates <code class="docutils literal notranslate"><span class="pre">strandedness.tsv</span></code> in the current directory,
which is the summarize output of RSeQC’s <code class="docutils literal notranslate"><span class="pre">infer_experiment.py</span></code> across all
samples.</p></li>
<li><p>implement STAR two-pass alignment. Default is still single-pass.</p></li>
<li><p>Clean up hard-coded STAR indexing Log.out file</p></li>
<li><p>Include <code class="docutils literal notranslate"><span class="pre">ashr</span></code> and <code class="docutils literal notranslate"><span class="pre">ihw</span></code> Bioconductor packages in the R requirements, for
use with recent versions of DESeq2.</p></li>
</ul>
</section>
<section id="rna-seq-downstream">
<h3>RNA-seq downstream<a class="headerlink" href="#rna-seq-downstream" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Functional enrichment and gene patterns are now separate child documents.
This makes it easier to turn them on/off by only needing to adjust the chunk
options of the child chunk</p></li>
<li><p>Created a new documentation method for rnaseq.Rmd. Now there is a separate,
dedicated documentation page with sections that exactly correspond to each
named chunk in the Rmd, as well as a tool for ensuring that chunks and docs
stay synchronized. See <a class="reference internal" href="rnaseq-rmd.html#rnaseqrmd"><span class="std std-ref">global_options</span></a> for the new docs.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">counts.df</span></code> and <code class="docutils literal notranslate"><span class="pre">counts.plot</span></code> functions to make it much easier to
make custom dotplots of top counts by melting and joining the counts table
with the metadata in colData.</p></li>
<li><p>DEGpatterns cluster IDs are now added as additional columns in the output
TSVs for each contrast</p></li>
<li><p>Many functions in the rnaseq.Rmd now expect a list of <a class="reference internal" href="rnaseq-rmd.html#term-dds"><span class="xref std std-term">dds</span></a> objects.
See <a class="reference internal" href="rnaseq-rmd.html#dds-list"><span class="std std-ref">dds_list</span></a> for more info on this.</p></li>
<li><p>Created a new R package, <code class="docutils literal notranslate"><span class="pre">lcdbwf</span></code> stored in <code class="file docutils literal notranslate"><span class="pre">lib/lcdbwf</span></code>. This can be
edited in place, and it is loaded from disk within <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code>.</p></li>
<li><p>Modified some output keys to support recent versions of Snakemake, for which
<code class="docutils literal notranslate"><span class="pre">count</span></code> is a reserved keyword</p></li>
</ul>
</section>
<section id="id10">
<h3>General<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Conda environments are now split into R and non-R. See <a class="reference internal" href="conda.html#conda-envs"><span class="std std-ref">conda and conda envs in lcdb-wf</span></a> for
details. Updated <code class="docutils literal notranslate"><span class="pre">deploy.py</span></code> accordingly</p></li>
<li><p>symlinks rules are now set to be localrules</p></li>
<li><p>updated workflows to work on recent Snakemake versions</p></li>
<li><p>split environments into non-R and R. This, along with a loose pinning of
versions (<code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>), dramatically speeds up environment creation.</p></li>
<li><p>updates to support latest Snakemake versions</p></li>
<li><dl class="simple">
<dt>improvements to testing:</dt><dd><ul>
<li><p>environment YAML files, rendered HTML, and docs are stored as artifacts on CircleCI</p></li>
<li><p>consolidations of some RNA-seq tests to reduce total time</p></li>
<li><p>additional comments in the test config yaml to help new users understand the system</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>new “preflight check” function is run to hopefully catch errors before running workflows</p></li>
<li><p>updates to support recent Picard versions</p></li>
<li><p>added wildcard constraints to help Snakemake solve DAG</p></li>
</ul>
</section>
</section>
<section id="v1-5-3">
<h2>v1.5.3<a class="headerlink" href="#v1-5-3" title="Link to this heading">¶</a></h2>
<section id="id11">
<h3>General<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>default 12-hr wall time in WRAPPER_SLURM</p></li>
<li><p>update .gitignore (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/issues/223">#223</a>)</p></li>
<li><p>remove the FastQC status checks section from the MultiQC report (which shows
up in recent MultiQC versions) (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/issues/246">#246</a></p></li>
</ul>
</section>
<section id="bugs">
<h3>Bugs<a class="headerlink" href="#bugs" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>add bed12 conversion for all species with default reference configs</p></li>
<li><p>presence of an orig_filename_R2 in sampletable is sufficient to consider the
experiment PE</p></li>
<li><p>ensure DEGpattern output only contains unique genes</p></li>
<li><p>bring back featurecounts in multiqc report</p></li>
<li><p>“attach” chunk in rnaseq.Rmd was not properly set to depend on the “results” chunk</p></li>
</ul>
</section>
<section id="id14">
<h3>RNA-seq<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>dds objects can now be created from a full featureCounts input file and
a subsetted colData table, if subset.counts=TRUE</p></li>
<li><p>improve the dependencies between rnaseq.Rmd chunks so that cache=TRUE behaves
as expected: (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/issues/232">#232</a>)</p></li>
<li><p>add plots for rnaseq.Rmd size factors (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/issues/222">#222</a>)</p></li>
<li><p>run rseqc instead of CollectRnaSeqMetrics (the multiqc output is nicer for
it, and it’s pretty much doing the same thing) (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/issues/218">#218</a>)</p></li>
<li><p>when converting Ensembl to symbol, if there is no symbol then fall back to
the Ensembl ID to avoid NA (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/issues/246">#246</a>)</p></li>
<li><p>in rnaseq.Rmd, all caches will be invalidated if the sampletable or the
featurecounts table have changed.</p></li>
</ul>
</section>
<section id="id19">
<h3>Tests<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>using continuumio/miniconda3 container; finally got en_US.utf8 locale
installed and working correctly in that container so that multiqc works.</p></li>
</ul>
</section>
</section>
<section id="v1-5-2">
<h2>v1.5.2<a class="headerlink" href="#v1-5-2" title="Link to this heading">¶</a></h2>
<section id="bug-fixes">
<h3>Bug fixes<a class="headerlink" href="#bug-fixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>When some samples were substrings of other samples (e.g., <cite>WT_1_1</cite> and
<cite>WT_1_10</cite>), DESeqDataSetFromCombinedFeatureCounts was assigning the wrong
names. This has now been fixed in <cite>helpers.Rmd</cite>.</p></li>
</ul>
</section>
</section>
<section id="v1-5-1">
<h2>v1.5.1<a class="headerlink" href="#v1-5-1" title="Link to this heading">¶</a></h2>
<section id="id20">
<h3>Bug fixes<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>DESeqDataSetFromCombinedFeatureCounts (added in v1.5) was incorrectly
assigning labels to samples when the order of the sampletable did not match
the order of the samples in the featureCounts table columns. This has been
fixed.</p></li>
</ul>
</section>
<section id="id21">
<h3>General<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><cite>deploy.py</cite> deployment script now only pays attention to files checked in to
version control and optionally can create a conda environment in the target
directory.</p></li>
<li><p>tests now work out of a newly-deployed instance to better reflect real-world
usage</p></li>
</ul>
</section>
<section id="chip-seq-and-rna-seq">
<h3>ChIP-seq and RNA-seq<a class="headerlink" href="#chip-seq-and-rna-seq" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>reorder cutadapt commands to avoid a MultQC parsing bug in the cutadapt
module (see <a class="reference external" href="https://github.com/ewels/MultiQC/issues/949">https://github.com/ewels/MultiQC/issues/949</a>)</p></li>
</ul>
</section>
<section id="id22">
<h3>RNA-seq<a class="headerlink" href="#id22" title="Link to this heading">¶</a></h3>
<p>The majority of these changes affect <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code>:</p>
<ul class="simple">
<li><p>modifications to MultiQC config to get back featureCounts output</p></li>
<li><p><cite>plotMA.label</cite> function (in <code class="docutils literal notranslate"><span class="pre">helpers.Rmd</span></code>) now defaults to FDR &lt; 0.1
(instead of 0.01), and additionally supports labeling using different columns
of the results object (e.g., “symbol”).</p></li>
<li><p>remove some now-redundant featureCounts code</p></li>
<li><p>add a comment showing where to collapse replicates</p></li>
<li><p>convert colData’s first column to rownames</p></li>
<li><p>implement lower limit for DEGpatterns clustering (default is 0, but can
easily set to higher if you’re getting issues)</p></li>
<li><p>expose arbitrary additional function arguments to <code class="docutils literal notranslate"><span class="pre">top.plots</span></code>. This allows
different <cite>intgroup</cite> arguments to be passed to the <cite>my.counts</cite> function,
enabling different ways of plotting the gene dotplots.</p></li>
</ul>
</section>
</section>
<section id="v1-5-sept-2019">
<h2>v1.5 (Sept 2019)<a class="headerlink" href="#v1-5-sept-2019" title="Link to this heading">¶</a></h2>
<p>Major change: <strong>it is no longer possible to mix single-end and paired-end
samples within the same run of the workflow.</strong> See <a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/208">#208</a> and the corresponding issue
description at <a class="reference external" href="https://github.com/lcdb/lcdb-wf/issues/175">#175</a>.</p>
<p>This version also has many improvements to the <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code> file for RNA-seq,
as described below.</p>
<section id="id25">
<h3>RNA-seq<a class="headerlink" href="#id25" title="Link to this heading">¶</a></h3>
<p>Many changes and improvements to <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code>, including:</p>
<ul class="simple">
<li><p>Differential analysis summaries now include labeled MA plots (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/192/files">#192</a>)</p></li>
<li><p>PCA plots now use plotly for improved insepction of samples (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/192/files">#192</a></p></li>
<li><p>don’t use knitrBootstrap any more (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/192/files">#192</a></p></li>
<li><p>heatmaps use heatmaply package for better interaction (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/192/files">#192</a></p></li>
<li><p>allow <code class="docutils literal notranslate"><span class="pre">sel.list</span></code> to be used for UpSet plots and fix some typos <a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/205">#205</a></p></li>
<li><p>workaround for degPatterns for corner cases where there are few clusters because of the <code class="docutils literal notranslate"><span class="pre">minc</span></code> parameter (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/205">#205</a>)</p></li>
<li><p>alpha and lfc.thresh are now pulled out into a separate chunk (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/206">#206</a>)</p></li>
<li><p>Support AnnotationHub http proxy handling in new version of AnnotationHub (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/207">#207</a>).</p></li>
</ul>
<p>As well as the following changes to other parts of the RNA-seq workflow, such as:</p>
<ul class="simple">
<li><p>better bigWig file nomenclature (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/194/files">#194</a>), uses “pos” and “neg”.</p></li>
<li><p>featureCounts only runs once on all BAMs rather than individual samples (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/195">#195</a>)</p></li>
<li><p>support <cite>rseqc infer_experiment</cite>, which replaces running featureCounts in multiple stranded modes (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/199">#199</a>, <a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/203">#203</a>)</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">--validateMappings</span></code> for salmon (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/203">#203</a>)</p></li>
</ul>
</section>
<section id="id39">
<h3>References<a class="headerlink" href="#id39" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>fix typo in <em>S. pombe</em> name</p></li>
</ul>
</section>
<section id="all-workflows">
<h3>All workflows<a class="headerlink" href="#all-workflows" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Documentation now recommends creating an environment for each directory using the <cite>-p</cite> argument (<a class="reference external" href="https://github.com/lcdb/lcdb-wf/pull/195">#195</a>)</p></li>
</ul>
</section>
</section>
<section id="v1-4-2-jul-2019">
<h2>v1.4.2 (Jul 2019)<a class="headerlink" href="#v1-4-2-jul-2019" title="Link to this heading">¶</a></h2>
<section id="bugfixes">
<h3>Bugfixes<a class="headerlink" href="#bugfixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Don’t require ChIP-seq configs to have at least one block for each supported
peak-caller</p></li>
</ul>
</section>
</section>
<section id="v1-4-1-jul-2019">
<h2>v1.4.1 (Jul 2019)<a class="headerlink" href="#v1-4-1-jul-2019" title="Link to this heading">¶</a></h2>
<section id="id41">
<h3>RNA-seq<a class="headerlink" href="#id41" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>KEGG results were not being added to the <code class="docutils literal notranslate"><span class="pre">all.enrich</span></code> list in <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code></p></li>
<li><p>symlinking bigWigs is now a local rule</p></li>
<li><p>default cutadapt options have changed to reflect current recommendations from
the author, and the cutadapt rule is now explicity using arguments rather
than requiring a separate <code class="docutils literal notranslate"><span class="pre">adapters.fa</span></code> file.</p></li>
<li><p>featureCounts now auto-detects whether it should be run with the <code class="docutils literal notranslate"><span class="pre">-p</span></code>
argument in paired-end mode (previously it was up to the user to make sure
this was added). The rule does have an override if this behavior is not wanted.</p></li>
</ul>
</section>
<section id="id42">
<h3>References<a class="headerlink" href="#id42" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The reference config for <em>Drosophila</em> is now fixed. Previously it depended on
<cite>chrom_convert</cite>. That script was a fly-specific script in lcdblib, but
lcdblib is no longer a dependency since v1.3. This fix uses the
<cite>convert_fastq_chroms</cite> and <cite>convert_gtf_chroms</cite> used in reference configs for
other species.</p></li>
</ul>
</section>
</section>
<section id="v1-4-may-2019">
<h2>v1.4 (May 2019)<a class="headerlink" href="#v1-4-may-2019" title="Link to this heading">¶</a></h2>
<section id="id43">
<h3>RNA-seq<a class="headerlink" href="#id43" title="Link to this heading">¶</a></h3>
<p>Much-improved <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code>:</p>
<ul class="simple">
<li><p>tabbed PCA plot</p></li>
<li><p>improved DEGpatterns chunk</p></li>
<li><p>dramatically improved functional enrichment section, with tabbed clusterprofiler plots and exported data in two flavors (combined and split)</p></li>
<li><p>improved upset plots, with exported files showing sets of genes</p></li>
<li><p>improved comments to highlight where to make changes</p></li>
<li><dl class="simple">
<dt>add new helper functions to <code class="docutils literal notranslate"><span class="pre">helpers.R</span></code>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">fromList.with.names</span></code>, for getting UpSet plot output</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rownames.first.col</span></code>, to make tidier dataframes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nested.lapply</span></code>, for convenient 2-level nested list apply</p></li>
<li><p>clusterprofiler helper functions</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="v1-3-may-2019">
<h2>v1.3 (May 2019)<a class="headerlink" href="#v1-3-may-2019" title="Link to this heading">¶</a></h2>
<section id="id44">
<h3>Bugfixes<a class="headerlink" href="#id44" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix broken paired-end support for RNA-seq. Previously, when using data from
elsewhere on disk and using the symlink rules, R2 would be symlinked to the
same file as R1.</p></li>
<li><p>Support for Snakemake 5.4.0 which changes behavior of the <code class="docutils literal notranslate"><span class="pre">expand()</span></code>
function.</p></li>
</ul>
</section>
<section id="infrastructure">
<h3>Infrastructure<a class="headerlink" href="#infrastructure" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>new deploy script to copy over only the files necessary for an analysis,
avoiding the clutter of testing infrastructure.</p></li>
<li><p>lcdblib, an external package, is no longer a dependency. In the interest of
better transparency and to make the code here easier to follow, the relevant
code from lcdblib was copied over to the <code class="docutils literal notranslate"><span class="pre">lib</span></code> directory in this
repository.</p></li>
</ul>
</section>
<section id="id45">
<h3>ChIP-seq and RNA-seq<a class="headerlink" href="#id45" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Bowtie2, HISAT2, and rRNA rules no longer use wrappers. This makes it easier
to track down what parameters are being used in each rule.</p></li>
<li><p>RSeQC is now available in Python 3 so wrappers have been removed.</p></li>
<li><p>NextGenMap support removed</p></li>
</ul>
</section>
</section>
<section id="v1-2-mar-2019">
<h2>v1.2 (Mar 2019)<a class="headerlink" href="#v1-2-mar-2019" title="Link to this heading">¶</a></h2>
<section id="id46">
<h3>RNA-seq<a class="headerlink" href="#id46" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>First-class paired-end support, including mixing PE and SE samples in the
same sampletable</p></li>
<li><p>Support for STAR aligner</p></li>
</ul>
</section>
<section id="id47">
<h3>References<a class="headerlink" href="#id47" title="Link to this heading">¶</a></h3>
<ul>
<li><p>FASTA files are always symlinked into the directories of indexes that were
created from it</p></li>
<li><p>Reference configs:</p>
<blockquote>
<div><ul class="simple">
<li><p>updated existing</p></li>
<li><p>added more species</p></li>
<li><p>new post-process for fasta or gtf: you can now use
NICHD-BSPC/chrom-name-mappings to convert chromosome names between UCSC
and Ensembl (see reference configs for examples of use)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="id48">
<h3>ChIP-seq and RNA-seq<a class="headerlink" href="#id48" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Updates to dependencies and MultiQC config</p></li>
</ul>
</section>
<section id="id49">
<h3>Infrastructure<a class="headerlink" href="#id49" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Updated requirements in <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> and in wrappers</p></li>
<li><p>Changed all <code class="docutils literal notranslate"><span class="pre">pd.read_table()</span></code> to <code class="docutils literal notranslate"><span class="pre">pd.read_csv(sep=&quot;\t&quot;)</span></code> to prevent warnings</p></li>
<li><p>Changed all <code class="docutils literal notranslate"><span class="pre">yaml.load()</span></code> to <code class="docutils literal notranslate"><span class="pre">yaml.load(Loader=yaml.FullLoader)</span></code> to
prevent warnings</p></li>
<li><p>Using DeprecationWarning rather than UserWarning in the deprecation handler
so there’s less spam in the logs</p></li>
<li><p>Improved tests:</p>
<ul>
<li><p>using data from pybedtools repo because modENCODE seems to be down</p></li>
<li><p>append rather than prepend base conda to PATH on circleci</p></li>
<li><p>separate isolated tests for STAR, ngm, and SRA</p></li>
<li><p>updated conda</p></li>
</ul>
</li>
<li><p>Docs additions:</p>
<ul>
<li><p>TMPDIR handling</p></li>
<li><p>clusterconfig</p></li>
<li><p>WRAPPER_SLURM</p></li>
<li><p>docs for developers</p></li>
<li><p>symlinking fastqs</p></li>
<li><p>using SRA sampletables</p></li>
<li><p>paired-end data</p></li>
</ul>
</li>
</ul>
</section>
<section id="colocalization">
<h3>Colocalization<a class="headerlink" href="#colocalization" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>From colocalization, removed the GAT “fractions” heatmap due to unresolved
pandas index errors</p></li>
</ul>
</section>
</section>
<section id="v1-1-aug-2018">
<h2>v1.1 (Aug 2018)<a class="headerlink" href="#v1-1-aug-2018" title="Link to this heading">¶</a></h2>
<section id="id50">
<h3>Infrastructure<a class="headerlink" href="#id50" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The default settings in Snakefiles are for real-world use, rather than for
testing. This reduces the amount of editing necessary before running actual
data. See <a class="reference internal" href="tests.html#test-settings"><span class="std std-ref">A note about test settings</span></a> for the extra step to take when testing
locally.</p></li>
<li><p>new <code class="docutils literal notranslate"><span class="pre">run_test.sh</span></code> script in each workflow directory to automatically run
the preprocessor when running test data</p></li>
<li><p>added extensive comments to Snakefiles with <code class="docutils literal notranslate"><span class="pre">NOTE:</span></code> string to make it
obvious where and how to make changes.</p></li>
<li><p>Documentation overhaul to bring everything up to v1.1. This includes Sphinx
autodocs on the <code class="docutils literal notranslate"><span class="pre">lib</span></code> module.</p></li>
<li><p>pytest test suite is run on the <code class="docutils literal notranslate"><span class="pre">lib</span></code> module</p></li>
</ul>
</section>
<section id="id51">
<h3>References<a class="headerlink" href="#id51" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>new <cite>metadata</cite> section in references config, which can be used to store
additional information like mappable bases and genome size.</p></li>
<li><p>References can now be included from other YAML files into the main config
file. This dramatically simplifies individual configfiles, and allows
multiple workflows to use identical references without having to do
error-prone and hard-to-maintain copy/pastes between workflow configs. See
<a class="reference internal" href="references-config.html#references-config"><span class="std std-ref">References config</span></a> for details.</p></li>
<li><p>New GTF conversion, <code class="docutils literal notranslate"><span class="pre">mappings</span></code>. This is intended to replace the
<code class="docutils literal notranslate"><span class="pre">annotation_hub</span></code> conversion, which was problematic because 1) a particular
annotation hub accession is not guaranteed to be found in new versions of
AnnotationHub, resulting in lack of reproducibility, and 2) it was difficult
to synchronize the results with a particular GTF annotation. The
<code class="docutils literal notranslate"><span class="pre">annotation_hub</span></code> conversion is still supported, but if it’s used then
a DeprecationWarning will be emitted, recommending <code class="docutils literal notranslate"><span class="pre">mappings</span></code> instead.</p></li>
</ul>
</section>
<section id="both-rna-seq-and-chip-seq">
<h3>Both RNA-seq and ChIP-seq<a class="headerlink" href="#both-rna-seq-and-chip-seq" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><cite>fastq_screen</cite> is now configured via <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>. This reduces the need
to edit the Snakefile and coordinate between the config and the fastq_screen
rule. Now everything is done within the config file.</p></li>
<li><p><cite>fastq_screen</cite> wrapper now handles additional output files created when using
the <code class="docutils literal notranslate"><span class="pre">--tag</span></code> and <code class="docutils literal notranslate"><span class="pre">--filter</span></code> arguments to <code class="docutils literal notranslate"><span class="pre">fastq_screen</span></code>.</p></li>
<li><p>In the config file, <code class="docutils literal notranslate"><span class="pre">assembly</span></code> has been changed to the more-descriptive
<code class="docutils literal notranslate"><span class="pre">organism</span></code>. The change is backwards compatible, but a DeprecationWarning is
raised if <code class="docutils literal notranslate"><span class="pre">assembly:</span></code> is still used, and changed to <code class="docutils literal notranslate"><span class="pre">organism</span></code> (though
only in memory, not on disk).</p></li>
<li><p>Patterns no longer use <code class="docutils literal notranslate"><span class="pre">{sample_dir}</span></code>, <code class="docutils literal notranslate"><span class="pre">{agg_dir}</span></code>, etc placeholders that
need to be configured in the config YAML. Instead, these directories are
hard-coded directly into the patterns. This simplifies the config files,
simplifies the patterns, and removes one layer of disconnect between the
filenames and how they are determined.</p></li>
<li><p>removed 4C workflow since it used 4c-ker</p></li>
</ul>
</section>
<section id="id52">
<h3>ChIP-seq<a class="headerlink" href="#id52" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>macs2 and sicer can accept mappable genome size overrides</p></li>
</ul>
</section>
<section id="id53">
<h3>RNA-seq<a class="headerlink" href="#id53" title="Link to this heading">¶</a></h3>
<ul>
<li><p>RNA-seq downstream:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">downstream/help_docs.Rmd</span></code> can be included for first-time users to
describe the sections of the RNA-seq analysis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code> now uses the same <code class="docutils literal notranslate"><span class="pre">NOTE:</span></code> syntax as the Snakefiles for
indicating where/what to change</p></li>
<li><p>Easy swapping of which strand to use from the three featureCounts runs
performed by the workflow</p></li>
<li><p>Be explicit about using DESeq2::lfcShrink as is now the default in recent
DESeq2 versions</p></li>
<li><p>improved the mechanism for keeping together results objects, dds objects, and
labels (list of lists, rather than individual list object; refactored
functions to use this new structure</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="v1-0-1-jun-2018">
<h2>v1.0.1 (Jun 2018)<a class="headerlink" href="#v1-0-1-jun-2018" title="Link to this heading">¶</a></h2>
<p>Bugfixes, last release before references changes.</p>
<section id="id54">
<h3>Infrastructure<a class="headerlink" href="#id54" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Transition to CircleCI for testing</p></li>
<li><p>Use production settings by default; see <a class="reference internal" href="tests.html#test-settings"><span class="std std-ref">A note about test settings</span></a> for
more.</p></li>
<li><p>lots o’ docs</p></li>
<li><p>new <code class="docutils literal notranslate"><span class="pre">include/references_configs</span></code> to help organize references. These are
currently not used by the workflows directly.</p></li>
<li><p>bugfix: use additional options when uncompressing downloaded reference files
(<code class="docutils literal notranslate"><span class="pre">--no-same-owner</span></code> for <code class="docutils literal notranslate"><span class="pre">tar</span></code>, <code class="docutils literal notranslate"><span class="pre">-f</span></code> for <code class="docutils literal notranslate"><span class="pre">gunzip</span></code>)</p></li>
<li><p>additional dependencies in the top-level environment to support the
additional features in rnaseq.Rmd and track hubs.</p></li>
<li><p>colocalization workflow, external workflow, figures workflow to demonstrate
vertical integration</p></li>
</ul>
</section>
<section id="id55">
<h3>RNA-seq<a class="headerlink" href="#id55" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>remove kallisto indexing, use salmon</p></li>
<li><p>improvements to how chipseq sampletables are parsed (with more informative
error messages)</p></li>
<li><p>run preseq for RNA-seq library complexity QC</p></li>
<li><p>support for merging bigwigs</p></li>
<li><p>featureCounts is now run in all three strandedness modes, and results
incorporated into MultiQC as separate modules.</p></li>
<li><p>RNA-seq now symlinks “pos” and “neg” bigWigs, which describe how reads map to
the <em>reference</em>, to “sense” and “antisense” bigWigs, which describe the
<em>originating RNA</em>. This makes it easy to swap strands depending on protocol.</p></li>
<li><p>new <code class="docutils literal notranslate"><span class="pre">downstream/helpers.Rmd</span></code> which factors out a lot of the work previously
done in <code class="docutils literal notranslate"><span class="pre">rnaseq.Rmd</span></code> into separate functions.</p></li>
<li><p>track hub building respects new sense/antisense bigwig symlinks</p></li>
</ul>
</section>
<section id="downstream-rnaseq-rmd">
<h3><code class="docutils literal notranslate"><span class="pre">downstream/rnaseq.Rmd</span></code><a class="headerlink" href="#downstream-rnaseq-rmd" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>AnnotationHub uses cache dir that will not clobber default home directory cache</p></li>
<li><p>use varianceStabilizingTransform instead of rlog</p></li>
<li><p>print a size factors table</p></li>
<li><p>use multiple cores for computationally expensive DESeq2 operations</p></li>
<li><p>using separate lists for results, dds objects, and nice labels for automated
plots for each contrast</p></li>
<li><p>UpSet plots for comparing gene lists across contrasts</p></li>
<li><p>DEGpattern plots for showing clusters of expression patterns (from the
DEGreport package)</p></li>
<li><p>attach normalized counts per sample and per factor (parsed from the model
used for the contrast) as well as TPM estimates to the results tables</p></li>
<li><p>trim the labels in GO enrichment plots when too long</p></li>
</ul>
</section>
<section id="id56">
<h3>ChIP-seq<a class="headerlink" href="#id56" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>sicer for chipseq domain calling</p></li>
<li><p>pin snakemake &lt;4.5.0 so that subworkflows behave correctly</p></li>
<li><p>chipseq peak-calling rules (and therefore wrappers) now expect a chromsizes
file as input</p></li>
<li><p>bigbed files for narrowPeak and broadPeak files are created correctly
depending on their format</p></li>
<li><p>run multiBigWigSummary and plotCorrelation from deepTools for ChIP-seq QC</p></li>
<li><p>ChIP-seq track hub generation script</p></li>
</ul>
</section>
<section id="id57">
<h3>Both RNA-seq and ChIP-seq<a class="headerlink" href="#id57" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>update deeptools calls to reflect &gt;v3.0 syntax</p></li>
<li><p>support for SRA run tables so it’s trivial to re-run experiments
in SRA</p></li>
<li><p>multiple FastQC runs are shown separately in MultiQC output</p></li>
</ul>
</section>
</section>
<section id="v1-0-may-2018">
<h2>v1.0 (May 2018)<a class="headerlink" href="#v1-0-may-2018" title="Link to this heading">¶</a></h2>
<p>First official full release.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2017, Ryan Dale, Justin Fear.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/changelog.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>